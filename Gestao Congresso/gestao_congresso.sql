-- MySQL Script generated by MySQL Workbench
-- Thu Nov 27 19:29:10 2025
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`PESSOA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PESSOA` (
  `ID_PESSOA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `INSTITUICAO` VARCHAR(150) NOT NULL,
  `ENDERECO` VARCHAR(300) NULL,
  `EMAIL` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`ID_PESSOA`),
  UNIQUE INDEX `EMAIL_UNIQUE` (`EMAIL` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CONGRESSO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CONGRESSO` (
  `ID_CONGRESSO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `NOME_CONGRESSO` VARCHAR(200) NOT NULL,
  `DATA_CONGRESSO` DATE NULL,
  `LOCAL_CONGRESSO` VARCHAR(200) NULL,
  `DATA_LIMITE_CONGRESSO` DATE NULL,
  `DATA_INSCRICAO_CONGRESSO` DATE NULL,
  PRIMARY KEY (`ID_CONGRESSO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`GRUPO_TRABALHO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`GRUPO_TRABALHO` (
  `ID_GRUPO_TRABALHO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `NOME_GRUPO_TRABALHO` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`ID_GRUPO_TRABALHO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`TEMA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`TEMA` (
  `ID_TEMA` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `NOME_TEMA` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`ID_TEMA`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SESSAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`SESSAO` (
  `ID_SESSAO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `DATA_SESSAO` DATE NULL,
  `HORA_SESSAO` TIME NULL,
  `TITULO_SESSAO` VARCHAR(200) NULL,
  `CONGRESSO_ID_CONGRESSO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`ID_SESSAO`),
  INDEX `fk_SESSAO_CONGRESSO1_idx` (`CONGRESSO_ID_CONGRESSO` ASC),
  CONSTRAINT `fk_SESSAO_CONGRESSO1`
    FOREIGN KEY (`CONGRESSO_ID_CONGRESSO`)
    REFERENCES `mydb`.`CONGRESSO` (`ID_CONGRESSO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CONGRESSO_has_GRUPO_TRABALHO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CONGRESSO_has_GRUPO_TRABALHO` (
  `CONGRESSO_ID_CONGRESSO` INT UNSIGNED NOT NULL,
  `GRUPO_TRABALHO_ID_GRUPO_TRABALHO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`CONGRESSO_ID_CONGRESSO`, `GRUPO_TRABALHO_ID_GRUPO_TRABALHO`),
  INDEX `fk_CONGRESSO_has_GRUPO_TRABALHO_GRUPO_TRABALHO1_idx` (`GRUPO_TRABALHO_ID_GRUPO_TRABALHO` ASC),
  INDEX `fk_CONGRESSO_has_GRUPO_TRABALHO_CONGRESSO_idx` (`CONGRESSO_ID_CONGRESSO` ASC),
  CONSTRAINT `fk_CONGRESSO_has_GRUPO_TRABALHO_CONGRESSO`
    FOREIGN KEY (`CONGRESSO_ID_CONGRESSO`)
    REFERENCES `mydb`.`CONGRESSO` (`ID_CONGRESSO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CONGRESSO_has_GRUPO_TRABALHO_GRUPO_TRABALHO1`
    FOREIGN KEY (`GRUPO_TRABALHO_ID_GRUPO_TRABALHO`)
    REFERENCES `mydb`.`GRUPO_TRABALHO` (`ID_GRUPO_TRABALHO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ARTIGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ARTIGO` (
  `ID_ARTIGO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `NUMERO_ARTIGO` INT UNSIGNED NOT NULL,
  `TITULO_ARTIGO` VARCHAR(300) NOT NULL,
  `ASSINATURA_PRINCIPAL_ARTIGO` VARCHAR(200) NOT NULL,
  `DATA_APRESENTACAO` DATE NULL,
  `HORA_APRESENTACAO` TIME NULL,
  PRIMARY KEY (`ID_ARTIGO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ARTIGO_has_PESSOA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ARTIGO_has_PESSOA` (
  `ARTIGO_ID_ARTIGO` INT UNSIGNED NOT NULL,
  `PESSOA_ID_PESSOA` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`ARTIGO_ID_ARTIGO`, `PESSOA_ID_PESSOA`),
  INDEX `fk_ARTIGO_has_PESSOA_PESSOA1_idx` (`PESSOA_ID_PESSOA` ASC),
  INDEX `fk_ARTIGO_has_PESSOA_ARTIGO1_idx` (`ARTIGO_ID_ARTIGO` ASC),
  CONSTRAINT `fk_ARTIGO_has_PESSOA_ARTIGO1`
    FOREIGN KEY (`ARTIGO_ID_ARTIGO`)
    REFERENCES `mydb`.`ARTIGO` (`ID_ARTIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ARTIGO_has_PESSOA_PESSOA1`
    FOREIGN KEY (`PESSOA_ID_PESSOA`)
    REFERENCES `mydb`.`PESSOA` (`ID_PESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ARTIGO_has_TEMA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ARTIGO_has_TEMA` (
  `ARTIGO_ID_ARTIGO` INT UNSIGNED NOT NULL,
  `TEMA_ID_TEMA` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`ARTIGO_ID_ARTIGO`, `TEMA_ID_TEMA`),
  INDEX `fk_ARTIGO_has_TEMA_TEMA1_idx` (`TEMA_ID_TEMA` ASC),
  INDEX `fk_ARTIGO_has_TEMA_ARTIGO1_idx` (`ARTIGO_ID_ARTIGO` ASC),
  CONSTRAINT `fk_ARTIGO_has_TEMA_ARTIGO1`
    FOREIGN KEY (`ARTIGO_ID_ARTIGO`)
    REFERENCES `mydb`.`ARTIGO` (`ID_ARTIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ARTIGO_has_TEMA_TEMA1`
    FOREIGN KEY (`TEMA_ID_TEMA`)
    REFERENCES `mydb`.`TEMA` (`ID_TEMA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PESSOA_has_CONGRESSO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PESSOA_has_CONGRESSO` (
  `PESSOA_ID_PESSOA` INT UNSIGNED NOT NULL,
  `CONGRESSO_ID_CONGRESSO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`PESSOA_ID_PESSOA`, `CONGRESSO_ID_CONGRESSO`),
  INDEX `fk_PESSOA_has_CONGRESSO_CONGRESSO1_idx` (`CONGRESSO_ID_CONGRESSO` ASC),
  INDEX `fk_PESSOA_has_CONGRESSO_PESSOA1_idx` (`PESSOA_ID_PESSOA` ASC),
  CONSTRAINT `fk_PESSOA_has_CONGRESSO_PESSOA1`
    FOREIGN KEY (`PESSOA_ID_PESSOA`)
    REFERENCES `mydb`.`PESSOA` (`ID_PESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PESSOA_has_CONGRESSO_CONGRESSO1`
    FOREIGN KEY (`CONGRESSO_ID_CONGRESSO`)
    REFERENCES `mydb`.`CONGRESSO` (`ID_CONGRESSO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`REVISAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`REVISAO` (
  `ID_REVISAO` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `DATA_REVISAO` DATE NULL,
  `HORA_REVISAO` TIME NULL,
  `COMENTARIO` VARCHAR(300) NULL,
  `STATUS_REVISAO` ENUM('PENDENTE', 'FINALIZADO') NOT NULL,
  `PESSOA_ID_PESSOA` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`ID_REVISAO`),
  INDEX `fk_REVISAO_PESSOA1_idx` (`PESSOA_ID_PESSOA` ASC),
  CONSTRAINT `fk_REVISAO_PESSOA1`
    FOREIGN KEY (`PESSOA_ID_PESSOA`)
    REFERENCES `mydb`.`PESSOA` (`ID_PESSOA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`REVISAO_has_ARTIGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`REVISAO_has_ARTIGO` (
  `REVISAO_ID_REVISAO` INT UNSIGNED NOT NULL,
  `ARTIGO_ID_ARTIGO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`REVISAO_ID_REVISAO`, `ARTIGO_ID_ARTIGO`),
  INDEX `fk_REVISAO_has_ARTIGO_ARTIGO1_idx` (`ARTIGO_ID_ARTIGO` ASC),
  INDEX `fk_REVISAO_has_ARTIGO_REVISAO1_idx` (`REVISAO_ID_REVISAO` ASC),
  CONSTRAINT `fk_REVISAO_has_ARTIGO_REVISAO1`
    FOREIGN KEY (`REVISAO_ID_REVISAO`)
    REFERENCES `mydb`.`REVISAO` (`ID_REVISAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_REVISAO_has_ARTIGO_ARTIGO1`
    FOREIGN KEY (`ARTIGO_ID_ARTIGO`)
    REFERENCES `mydb`.`ARTIGO` (`ID_ARTIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`ARTIGO_has_SESSAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`ARTIGO_has_SESSAO` (
  `ARTIGO_ID_ARTIGO` INT UNSIGNED NOT NULL,
  `SESSAO_ID_SESSAO` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`ARTIGO_ID_ARTIGO`, `SESSAO_ID_SESSAO`),
  INDEX `fk_ARTIGO_has_SESSAO_SESSAO1_idx` (`SESSAO_ID_SESSAO` ASC),
  INDEX `fk_ARTIGO_has_SESSAO_ARTIGO1_idx` (`ARTIGO_ID_ARTIGO` ASC),
  CONSTRAINT `fk_ARTIGO_has_SESSAO_ARTIGO1`
    FOREIGN KEY (`ARTIGO_ID_ARTIGO`)
    REFERENCES `mydb`.`ARTIGO` (`ID_ARTIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ARTIGO_has_SESSAO_SESSAO1`
    FOREIGN KEY (`SESSAO_ID_SESSAO`)
    REFERENCES `mydb`.`SESSAO` (`ID_SESSAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- 1
INSERT INTO PESSOA (INSTITUICAO, ENDERECO, EMAIL)
VALUES
('UFSC', 'Rua A, 100', 'maria@teste.com'),
('USP', 'Rua B, 200', 'joao@teste.com'),
('UFRJ', 'Rua C, 300', 'ana@teste.com');

-- 2 error
INSERT INTO CONGRESSO  
(NOME_CONGRESSO, DATA_CONGRESSO, LOCAL_CONGRESSO, DATA_LIMITE_CONGRESSO, DATA_INSCRICAO_CONGRESSO)
VALUES
('Congresso de Tecnologia 2025', '2025-12-10', 'São Paulo', '2025-11-30', '2025-10-01'),
('Congresso de IA 2025', '2025-12-20', 'Rio de Janeiro', '2025-12-01', '2025-10-05');



-- 3 erro
INSERT INTO GRUPO_TRABALHO (NOME_GRUPO_TRABALHO)
VALUES
('Inteligência Artificial'),
('Redes de Computadores'),
('Engenharia de Software');


-- 4
INSERT INTO TEMA (NOME_TEMA)
VALUES
('Aprendizado de Máquina'),
('Banco de Dados'),
('Programação');

-- 5
INSERT INTO SESSAO (DATA_SESSAO, HORA_SESSAO, TITULO_SESSAO, CONGRESSO_ID_CONGRESSO)
VALUES
('2025-12-10', '09:00:00', 'Sessão de Abertura', 1),
('2025-12-10', '14:00:00', 'Sessão de Artigos', 1),
('2025-12-20', '10:00:00', 'Sessão de IA', 2);

-- 6 error
INSERT INTO ARTIGO (NUMERO_ARTIGO, TITULO_ARTIGO, ASSINATURA_PRINCIPAL_ARTIGO, DATA_APRESENTACAO, HORA_APRESENTACAO)
VALUES
(101, 'Detecção Facial com IA', 'Maria Silva', '2025-12-10', '14:00:00'),
(102, 'Banco de Dados em Nuvem', 'João Santos', '2025-12-10', '15:00:00'),
(103, 'Aprendizado Profundo Aplicado', 'Ana Costa', '2025-12-20', '10:30:00');

-- 7
INSERT INTO ARTIGO_has_PESSOA (ARTIGO_ID_ARTIGO, PESSOA_ID_PESSOA)
VALUES
(1, 1),
(1, 2),
(2, 2),
(3, 3);


-- 8
INSERT INTO ARTIGO_has_TEMA (ARTIGO_ID_ARTIGO, TEMA_ID_TEMA)
VALUES
(1, 1),
(2, 2),
(3, 1);

-- 9
INSERT INTO PESSOA_has_CONGRESSO (PESSOA_ID_PESSOA, CONGRESSO_ID_CONGRESSO)
VALUES
(1, 1),
(2, 1),
(3, 2);

-- 10 erro
INSERT INTO GRUPO_TRABALHO (NOME_GRUPO_TRABALHO) VALUES
('Inteligência Artificial'),
('Redes de Computadores'),
('Engenharia de Software');


-- 11
INSERT INTO REVISAO (DATA_REVISAO, HORA_REVISAO, COMENTARIO, STATUS_REVISAO, PESSOA_ID_PESSOA)
VALUES
('2025-11-20', '10:00:00', 'Revisão Inicial', 'PENDENTE', 1),
('2025-11-22', '14:30:00', 'Revisão Completa', 'FINALIZADO', 2); 

-- 12
INSERT INTO REVISAO_has_ARTIGO (REVISAO_ID_REVISAO, ARTIGO_ID_ARTIGO)
VALUES
(1, 1),
(1, 2),
(2, 3);

SELECT * FROM PESSOA;

SELECT * FROM CONGRESSO;

SELECT * FROM ARTIGO;

SELECT R.ID_REVISAO, R.DATA_REVISAO, R.STATUS_REVISAO, P.EMAIL AS REVISOR
FROM REVISAO R
JOIN PESSOA P ON R.PESSOA_ID_PESSOA = P.ID_PESSOA;


SELECT R.ID_REVISAO, A.TITULO_ARTIGO
FROM REVISAO_has_ARTIGO RA
JOIN ARTIGO A ON RA.ARTIGO_ID_ARTIGO = A.ID_ARTIGO
JOIN REVISAO R ON RA.REVISAO_ID_REVISAO = R.ID_REVISAO;

SELECT C.NOME_CONGRESSO, G.NOME_GRUPO_TRABALHO
FROM CONGRESSO_has_GRUPO_TRABALHO CG
JOIN CONGRESSO C ON CG.CONGRESSO_ID_CONGRESSO = C.ID_CONGRESSO
JOIN GRUPO_TRABALHO G ON CG.GRUPO_TRABALHO_ID_GRUPO_TRABALHO = G.ID_GRUPO_TRABALHO;


SELECT A.TITULO_ARTIGO, P.EMAIL AS AUTOR
FROM ARTIGO_has_PESSOA AP
JOIN ARTIGO A ON AP.ARTIGO_ID_ARTIGO = A.ID_ARTIGO
JOIN PESSOA P ON AP.PESSOA_ID_PESSOA = P.ID_PESSOA;






